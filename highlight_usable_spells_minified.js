const preparedColor="green",usedColor="#AA7A00",grayedOutColor="#333333";var highlightPreparedToggle=!1,unpreparedSpellsHidden=!1,nonOneActionSpellsHidden=!1,customFontActive=!1,spellButtons=document.querySelectorAll('button[name="roll_spellroll"]');function createBtn(e,t){var l=document.createElement("label");document.querySelector('div[class="spellsectiontoggles background-color"]').appendChild(l);var n=document.createElement("button");n.className="pc-spellcaster-field btn",n.style="margin: auto; width: 100%",n.type="roll",n.addEventListener("click",t);var o=document.createElement("span");o.innerHTML=e,n.appendChild(o),l.appendChild(n)}function toggleOneActionSpellsVisbility(){for(i=0;i<spellButtons.length;i++){let e=spellButtons[i].parentElement;if(e.querySelector('span[name="attr_name"]').innerHTML.includes("---"))continue;let t=e.querySelector('select[name="attr_cast_actions"]');e.style.visibility="visible",!1==nonOneActionSpellsHidden&&"1-action"!=t.value&&"1-to-2-actions"!=t.value&&"1-to-3-actions"!=t.value&&(e.style.visibility="hidden")}nonOneActionSpellsHidden=!nonOneActionSpellsHidden}function toggleUnpreparedSpellsVisbility(){for(i=0;i<spellButtons.length;i++){let e=spellButtons[i].parentElement;if(e.querySelector('span[name="attr_name"]').innerHTML.includes("---"))continue;let t=e.querySelector('input[name="attr_uses"]'),l=e.querySelector('input[name="attr_uses_max"]');e.style.visibility="visible",!1==unpreparedSpellsHidden&&null!=t&&0==t.value&&null!=l&&0==l.value&&(e.style.visibility="hidden")}unpreparedSpellsHidden=!unpreparedSpellsHidden}function highlightPreparedSpells(){for(i=0;i<spellButtons.length;i++){let e=spellButtons[i].parentElement,t=e.querySelector('span[name="attr_name"]');if(highlightPreparedToggle){spellButtons[i].removeAttribute("style");continue}if(t.innerHTML.includes("---")){spellButtons[i].style.backgroundColor="black";continue}let l=e.querySelector('input[name="attr_uses"]'),n=e.querySelector('input[name="attr_uses_max"]');if(null==l){let o=document.querySelector('input[name="attr_focus_points"]');null!=o&&o.value>0?spellButtons[i].style.backgroundColor=preparedColor:spellButtons[i].style.backgroundColor=usedColor}else if(l.value>0){if(t.innerHTML.includes("Staff")||t.innerHTML.includes("Mask")||t.innerHTML.includes("Item")||t.innerHTML.includes("Wand")){spellButtons[i].style.backgroundColor="darkred";continue}spellButtons[i].style.backgroundColor=preparedColor}else n.value>0?spellButtons[i].style.backgroundColor=usedColor:spellButtons[i].style.backgroundColor="#333333"}highlightPreparedToggle=!highlightPreparedToggle}function toggleFont(){for(i=0;i<spellButtons.length;i++){let e=spellButtons[i].parentElement.querySelector('span[name="attr_name"]');e.style.textTransform="none",customFontActive&&(e.style.textTransform=null)}customFontActive=!customFontActive}createBtn("Toggle Highlights",highlightPreparedSpells),createBtn("Toggle Visbility",toggleUnpreparedSpellsVisbility),createBtn("One Action",toggleOneActionSpellsVisbility),createBtn("Toggle Font",toggleFont);
